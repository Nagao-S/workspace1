-- 1. インデックス設定前
-- employees データベースの employees テーブルに対して、誕生日が1961年8月3日のレコードを取得してください。その際に、EXPLAIN ANALYZE ステートメントを利用することで、実行時間を計測してください。
EXPLAIN ANALYZE SELECT * FROM employees WHERE birth_date = '1961-08-03';
0.28sec


-- 2. インデックスの作成
-- employees データベースの employees テーブルの birth_date カラムにインデックスを作成してください。
CREATE INDEX idx_birth_date ON employees (birth_date);

-- 3. インデックスの確認
-- employees データベースの employees テーブルのインデックスを確認し、インデックスが作成されていることを確認してください。
SHOW INDEX FROM employees;

-- 4. インデックスの効果の確認
-- 1と同じクエリを実行してください。その際に、EXPLAIN ANALYZE ステートメントを利用することで、実行時間を計測し、実行が高速化されていることを確認してください。
0.01sec

-- 5. インデックスの説明
-- インデックスを貼ることでクエリが高速化された理由をデータベース初心者にわかるように説明してください。

-- 6. インデックスの削除
-- 作成したインデックスを削除してください。
DROP INDEX idx_birth_date ON employees;

-- 7. ベストプラクティス
-- インデックスは作成すればするほどよいというものではありません。必要な場合のみ作成することが重要です。

-- インデックス作成のベストプラクティスについて調べ、どのような方針でインデックスを貼ると良いかまとめてください。
よく検索されるカラム、WHERE句やJOIN条件で頻繁に使用されるカラムにインデックスを作成する。
外部キーやユニークキー制約があるカラムにインデックスを作成する。
カーディナリティ（異なる値の数）が高いカラムにインデックスを作成する。
更新が頻繁に行われるカラムや、カーディナリティが低いカラムにはインデックスを避ける。インデックスは更新の度に再構築されるため、パフォーマンスに悪影響を及ぼす場合がある。
必要ないインデックスは削除する。インデックスが多いほどデータベースの更新や管理が遅くなります。
クエリの実行計画を調べ、インデックスが効果的に使われているか確認する。適切にインデックスを使用できていない場合、クエリの最適化やインデックスの見直しが必